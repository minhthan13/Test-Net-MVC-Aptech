@using System.Security.Claims
@using TestNetMVC.Models
@model Employee
@{
  Layout = "~/Areas/_Layout.cshtml";

  var roleuser = User.FindFirst(ClaimTypes.Role).Value;
  var roleArea = "";
  var roleController = "";

  switch (roleuser)
  {
    case "Admin":
      roleArea = "Admin";
      roleController = "Admin";

      break;
    case "Staff":
      roleArea = "Employees";
      roleController = "Employees";

      break;
  };

}


<h1> My Information @Model.Username</h1>

<hr>
<br>
<br>
<form method="post" asp-controller="Home" asp-action="EditAccount" enctype="multipart/form-data">
  <input type="hidden" asp-for="Username">
  <div class="container">
    <div class="row d-flex justify-content-between">
      <div class="col-5">

        <div class="form-group">

          <label for="username">Username</label>
          <input type="text" class="form-control" id="username" asp-for="Username" disabled>
        </div>

        <div class="form-group">
          <label for="Fullname">Fullname</label>
          <input type="text" class="form-control" id="Fullname" asp-for="Fullname">
        </div>
        <div class="form-group">
          <label for="Birthday">Birthday</label>
          <input type="date" class="form-control" id="Birthday" asp-for="Dob" />
        </div>
        <div class="form-group col-5">
          <div class="input-group">
            <label class="input-group-text">Role</label>
            <input type="text" disabled class="form-control" value="@Model.Roles.First().RoleName">
          </div>
        </div>

      </div>


      <div class="col-5">
        <div class="form-group">
          <span>Photo: </span>
          <label for="Photo">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width: 1.5rem; height: 1.5rem;">
              <path style="cursor: pointer;"
                d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z" />
            </svg>
          </label>
          <input type="file" id="Photo" name="Photo" hidden onchange="previewImage(this)">
        </div>
        <div class="form-group d-flex justify-content-start">
          <label style="width: 200px;height: 200px;" class="border" id="previewImage">
            <img src="~/images/@Model.Photo" width="200" height="200">
          </label>
        </div>
      </div>
      <div class="col-12 d-flex justify-content-center"> <button type="submit" class="btn btn-primary ">Save
          Changes</button></div>
    </div>
  </div>

</form>
<br>


<script>

  let fileUpload = null;
  function previewImage(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      fileUpload = input.files;
      reader.onload = function (e) {
        document.getElementById('previewImage').innerHTML = '<img src="' + e.target.result + '" width="200" height="200">';
      }
      reader.readAsDataURL(input.files[0]); // Đọc dữ liệu từ file và chuyển đổi thành URL dạng base64
    } else {
      input.files = fileUpload;
    }
  }
</script>